# PostgreSQL TLS Certificate Generator (Bash Script)

‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **‡∏™‡∏£‡πâ‡∏≤‡∏á TLS/SSL certificate ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PostgreSQL**  
‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **Internal CA (Certificate Authority)** ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á  
‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö:

- PostgreSQL (Docker / VM)
- docker-compose
- GitHub Actions (‡πÉ‡∏ä‡πâ cert ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤)
- Environment: dev / uat / prod

> ‚ùó ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ **‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏π‡∏Å‡∏£‡∏±‡∏ô‡πÉ‡∏ô CI/CD workflow**  
> ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö manual ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥ cert ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

---

## ‚ú® Features
- ‡∏™‡∏£‡πâ‡∏≤‡∏á CA (`ca.crt`)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Server Certificate (`server.crt`, `server.key`)
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **SAN (DNS / IP)** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `sslmode=verify-full`
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏ö‡∏ö `{project-name}-{timestamp}`
- ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (`server.key` permission = `600`)
- ‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ (reproducible)

---

## üìÅ Output Structure
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:
```sh
certs/
‚îî‚îÄ‚îÄ myproject-20250101-153000/
    ‚îú‚îÄ‚îÄ ca.crt
    ‚îú‚îÄ‚îÄ ca.key   
    ‚îú‚îÄ‚îÄ server.crt
    ‚îî‚îÄ‚îÄ server.key
```

> ‚ö†Ô∏è **‡∏´‡πâ‡∏≤‡∏° commit cert/key ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏∂‡πâ‡∏ô GitHub**
---

## üöÄ Usage
### 1) ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå

```bash
chmod +x ./create_self_sign_cert.sh
chmod +x ./start_create.sh
```

### 2) ‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)
```bash
./start_create.sh
```

‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á:

```bash
PROJECT_NAME=myproj DNS_NAMES="postgres,localhost" IP_ADDRESSES="127.0.0.1" \
  ./create_self_sign_cert.sh
```
